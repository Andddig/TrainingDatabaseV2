<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Edit Training Class - BVAR19 Portal</title>
  <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
  <div class="container">
    <header>
      <h1>BVAR19 Portal</h1>
      <nav>
        <a href="/">Home</a>
        <a href="/dashboard">Dashboard</a>
        <% if (user.isAdmin) { %>
          <a href="/admin">Admin Panel</a>
        <% } %>
        <a href="/logout">Logout</a>
      </nav>
    </header>
    
    <main>
      <div class="edit-class">
        <div class="form-header">
          <h2>Edit Training Class</h2>
          <a href="/training/classes" class="btn-back">Back to Classes</a>
        </div>
        
        <% if (error) { %>
          <div class="error-message">
            <p><%= error %></p>
          </div>
        <% } %>
        
        <% if (success) { %>
          <div class="success-message">
            <p><%= success %></p>
          </div>
        <% } %>
        
        <div class="class-form">
          <form action="/training/class/<%= trainingClass._id %>/update" method="POST">
            <div class="form-group">
              <label for="name">Class Name:</label>
              <input type="text" id="name" name="name" value="<%= trainingClass.name %>" required>
            </div>
            
            <div class="form-group">
              <label for="description">Description:</label>
              <textarea id="description" name="description" rows="3"><%= trainingClass.description %></textarea>
            </div>
            
            <div class="form-group">
              <label for="hoursValue">Default Hours Value:</label>
              <input type="number" id="hoursValue" name="hoursValue" min="0" step="0.5" value="<%= trainingClass.hoursValue %>">
            </div>
            
            <div class="form-group">
              <label>Prerequisites (Classes that must be completed first):</label>
              <div class="prerequisites-container">
                <% if (otherClasses && otherClasses.length > 0) { %>
                  <select name="prerequisites" multiple class="form-control" id="prerequisites">
                    <% otherClasses.forEach(classItem => { %>
                      <option value="<%= classItem._id %>" 
                        <% if (trainingClass.prerequisites && trainingClass.prerequisites.some(p => p._id.toString() === classItem._id.toString())) { %>selected<% } %>>
                        <%= classItem.name %>
                      </option>
                    <% }); %>
                  </select>
                  <small class="text-muted">Hold Ctrl/Cmd to select multiple prerequisites. Order matters - list them in the order they should be completed.</small>
                <% } else { %>
                  <p class="text-muted">No other classes available to set as prerequisites.</p>
                <% } %>
              </div>
            </div>
            
            <div class="form-actions">
              <button type="submit" class="btn-save">Update Class</button>
              <a href="/training/classes" class="btn-cancel">Cancel</a>
            </div>
          </form>
        </div>
      </div>
    </main>
    
    <footer>
      <p>&copy; <%= new Date().getFullYear() %> BVAR19.org. All rights reserved.</p>
    </footer>
  </div>
</body>
</html> 